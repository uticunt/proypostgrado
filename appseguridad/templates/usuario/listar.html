{% extends "plantilla.html" %}
{% block title %} POSGRADO | Usuarios {% endblock title %}

{% block content %}
<style>
    .card-header{
        background-color: #2f5793;
        color: white;
    }

    thead{
        background-color: #c8c8c8;
    }

</style>

    <div class="p-2">
        <div class="card mt-1">
            <div class="card-header d-flex justify-content-between ">           
                <h4 class="card-title pt-2 pl-5" >LISTADO DE USUARIOS</h4>                          
                {% if perms.appevaluacion.view_doctorado %}
                <div class="ml-auto">
                    <a href="#" class='btn btn-sm' style="background-color:#e7edf7 ;">
                        <i class='fas fa-plus'></i> NUEVO
                    </a>
                </div>  
                {% endif %}          
            </div>
            <div class="card-body">           
                <div class="row p-2"> 
                    <!-- Busqueda  -->
                    <div class="col-md-4 col-sm-6">
                        <label for="">Busqueda:</label>
                        <form action="." method="GET">
                            <div class="input-group">
                                <input type="text" name="buscar" id="buscar" class="form-control form-control-sm" autofocus placeholder="Buscar username" value="{{ buscar }}"><span class="input-group-btn">
                                <button class="btn btn-secondary p-1 pl-2 pr-2"><i class="fa fa-search fa-xs"></i></button></span>                            
                            </div>                        
                        </form>
                    </div>       
                    <!-- Separación -->
                    <div class="col-md-5 col-sm-6"></div>
                    <!-- Unidades -->        
                    <div class="col-md-3 col-sm-6">
                        <label for="">Estado:</label>                                  
                        <select class="form-control form-control-sm" id="" name="">
                            <option value="Todos">Todos</option>
                            <option value="Activos">Activos</option>
                            <option value="No Activos">No Activos</option>                           
                        </select>
                    </div>                             
                </div>            
                <br>
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <div class="table-responsive">
                        <table class="table table-striped table-sm" style="width:100%" id="tablaPostulantes">
                            <thead class="table-light">
                                <tr>                               
                                    <th>id</th>
                                    <th>Nombres y apellidos</th>                        
                                    <th>Estado</th>                                
                                    <th>Username</th>
                                    <th>Password</th>                                                                    
                                    <th><center>Opciones</center></th>
                                </tr>
                            </thead>
                            {% if page_obj %}
                            {% for item_usuario in page_obj %}
                            <tr>                            
                                <td>{{ item_usuario.id }}</td>                    
                                <td>{{ item_usuario.first_name }} {{ item_usuario.last_name }}</td>
                                <td>{{ item_usuario.is_active }}</td>                                
                                <td>{{ item_usuario.username }}</td>
                                <td>{{ item_usuario.password }}</td>
                                <td style="text-align: center;">
                                    <a href="#" class="btn btn-sm" style="background-color: #4273b5;"><i class="fa fa-edit" style="color: white;"></i></a> 
                                    <a href="#" onclick="" class="btn btn-danger btn-sm"><i class="fa fa-trash"></i></a>                      
                                </td>                    
                            </tr>
                            {% endfor %}                 
                            {% else %}                
                            <tr style="text-align: center;">
                                <td colspan="6">
                                    <p>No hay Registros</p>
                                </td>
                            </tr>
                            {% endif %}
                        </table>
                    </div>
                </div>                                    
            </div>       
            <!-- Paginación y Conteo -->
            <div class="card-footer">                  
                <div class="row">
                    <div class="col-lg-3 col-md-8 col-sm-6">
                        <div class="d-flex justify-content-start pt-1">
                            <label for="" class="p-2">CONTEO: </label>
                            <input type="text" class="form-control form-control-sm" value="{{conteo}}" readonly>
                            <label for="" class="p-2">Usuarios</label>
                        </div> 
                    </div>  
                    <div class="col-lg-6 col-md-6 col-sm-6"></div>
                    <div class="col-lg-3 col-md-8 col-sm-6">
                        <div class="d-flex justify-content-end pt-1">
                            <nav aria-label="pagination-django">
                                <ul class="pagination">
                                    {% if page_obj.has_previous %}                    
                                        <li class="page-item">
                                            <a class="page-link" href="?page=1">Primera</a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="?page={{ page_obj.previous_page_number }}"><<</a>
                                        </li>                        
                                    {% endif %}
                                    <li class="page-item"><a class="page-link">Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</a></li>
                                    {% if page_obj.has_next %}                       
                                        <li class="page-item">
                                            <a class="page-link" href="?page={{ page_obj.next_page_number }}">>></a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">Última</a>
                                        </li>
                                    {% endif %}
                                </ul>
                            </nav>
                        </div>



                    </div>
                
                    
                
                </div>
                
                                       

                
            </div>             
            <!--  -->           
        </div>    
    </div>
 
{% endblock content %}

{% block js %}
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
   
    {% if messages %}
    {% for m in messages %}
        <script>
            Swal.fire({
            "title": "Éxito",
            "text":"{{m}}",
            "icon":"success"
            })
            console.log("{{m}}")
        </script>
    {% endfor %}
    {% endif %}

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        function eliminarevaluacion(id){
            Swal.fire({ "title":"¿Realmente desea eliminar Registro?",
            "text":"Código :"+ id ,
            "showCancelButton":true,
            "cancelButtonText":"No",
            "confirmButtonText":"Si",
            "reverseButton":true,
            "confirmButtonColor":"#dc3545"
            }).then(function(result){ if(result.isConfirmed){
                window.location.replace(window.location.origin+"/evaluacion/delete/"+id+"/") }
        });
        }       
    </script>


          
{% endblock js %} 
