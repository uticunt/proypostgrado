{% extends "plantilla.html" %}
{% block title %} POSGRADO | Agregar Usuarios {% endblock title %}

{% load crispy_forms_tags %}

{% block content %}
<style>
    .card-header {
        background-color: #2f5793;
        color: white;
    }

    input[name="username"],
    [name="contenido"],
    [name="encabezado"],
    [name="asunto"],
    [name="nombre"] {
        height: 30px;
        font-family: "Red Hat Display", sans-serif;
        font-optical-sizing: auto;
        font-weight: 500;
        font-size: 13px;
    }


</style>
<div class="p-1">
    <div class="card mx-5 my-2">
        <div class="card-body select-container">
            <div class="row">
                <div class="col-lg-2"></div>
                <div class="col-lg-6">
                    <select class="form-select form-select-sm" aria-label="Default select example">
                        <option selected>Escoja una opción...</option>
                        <option value="1">Envio de un correo</option>
                        <option value="2">Proceso de Evaluación curricular</option>
                    </select>
                </div>
                <div class="col-lg-2">
                    <a href="#" class="btn btn-sm" style="background-color: #28487c; color: white; width: 90%;"><i
                            class="fa-solid fa-search"></i>
                        Seleccionar</a>
                </div>
            </div>
        </div>
    </div>

    <div class="card mx-5 my-4 ">
        <div class="card-header">
            <h4 class="card-title pl-5 pt-2" style="font-size: 14px;"><i class="fa-solid fa-plus mr-2"></i><b> ENVIO DE
                    CORREO </b></h4>
        </div>
        <div class="card-body">
            <!--       <div class="col-lg-2"> <a href="{% url 'download_excel_activos' %}" class="btn btn-sm"
                    style="background-color: #28487c; color: white; width: 90%;"><i class="fa-solid fa-user-shield"></i>
                    usuarios_activos</a></div> -->
                    <form method="post" action="" enctype="multipart/form-data" id="correoForm">
                        {% csrf_token %}
                        <div class="form-group">
                          <label for="asunto">Asunto:</label>
                          <input type="text" class="form-control" id="asunto" name="asunto" required>
                        </div>
                        <!-- <div class="form-group">
                          <label for="encabezado">Encabezado:</label>
                          <input type="text" class="form-control" id="encabezado" name="encabezado" required>
                        </div>
                        <div class="form-group">
                          <label for="nombre">Nombre:</label>
                          <input type="text" class="form-control" id="nombre" name="nombre" required>
                        </div>
                        <div class="form-group">
                          <label for="contenido">Contenido:</label>
                          <textarea class="form-control" id="contenido" name="contenido" rows="5" required></textarea>
                        </div> -->
                       <!--  <div class="form-group">
                          <label for="adjuntos">Adjuntos:</label>
                          <div class="col-lg-2"><div class="dropzone" id="adjuntosDropzone"></div></div>
                        </div> -->
                        <button type="submit" class="btn btn-primary">Enviar Correo</button>
                      </form>    
           
        </div>
    </div>

    <!-- Listado -->
    <div class="card mx-5 my-4 ">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="table-responsive">
                <table class="table table-sm my-3" style="width: 100%;" id="tablausuarios">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Nombres</th>
                            <th>Username</th>
                            <th>Password</th>
                            <th>Estado</th>
                            <th>
                                <center>Opciones</center>
                            </th>
                        </tr>
                    </thead>
                    <tbody id="tablebody_usuarios">

                    </tbody>
                    <tfoot>
                        <tr>
                            <th>Id</th>
                            <th>Nombres</th>
                            <th>Username</th>
                            <th>Password</th>
                            <th>Estado</th>
                            <th>
                                <center>Opciones</center>
                            </th>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</div>


{% endblock content %}

{% block js %}
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.2/min/dropzone.min.js"></script>

  <!--   <script>
     Dropzone.autoDiscover = false;
    var myDropzone = new Dropzone("#adjuntosDropzone", {
        url: "/usuarios/envio-correo/",  // Ruta de la vista para manejar la carga de archivos
        autoProcessQueue: false,
        paramName: "adjuntos",
        uploadMultiple: true
    });

    // Procesar el formulario cuando se envíe
    document.getElementById('correoForm').addEventListener('submit', function(event) {
        event.preventDefault();
        // Obtener el token CSRF
        var csrfToken = document.querySelector("[name=csrfmiddlewaretoken]").value;
        // Agregar el token CSRF a las cabeceras de la solicitud
        myDropzone.on('sending', function(file, xhr, formData) {
            formData.append('csrfmiddlewaretoken', csrfToken);
        });
        // Procesar la cola de archivos
        myDropzone.processQueue();
    });
    </script> -->
{% endblock %}